<!DOCTYPE html>
<html lang="en">
  <head>
	<title>Dashboard | Research Portal, IITK</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<!-- VENDOR CSS -->
	<link rel="stylesheet" href="/dash/assets/vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="/dash/assets/vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/dash/assets/vendor/linearicons/style.css">
	<link rel="stylesheet" href="/dash/assets/vendor/chartist/css/chartist-custom.css">
	<!-- MAIN CSS -->
	<link rel="stylesheet" href="/dash/assets/css/main.css">
	<!-- GOOGLE FONTS -->
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
	<!-- ICONS -->
	<link rel="apple-touch-icon" sizes="76x76" href="/dash/assets/img/apple-icon.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/dash/assets/img/favicon.png">
  <script>
		  var xhttp = new XMLHttpRequest();
		  function status(id,val){
        xhttp.open("POST", "/request/view/professor/", true);
        
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhttp.onreadystatechange = function () {
          if (xhttp.readyState == 4 && xhttp.status == 200){
            window.location.reload();
          }
        }
        xhttp.send("id"+ "="+id+"&"+ "status="+val); 
      }
      function status1(id,val){
        xhttp.open("POST", "/project/view/professor/", true);
        
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhttp.onreadystatechange = function () {
          if (xhttp.readyState == 4 && xhttp.status == 200){
            window.location.reload();
          }
        }
        xhttp.send("id"+ "="+id+"&"+ "status="+val); 
		  }
	</script>	
</head>

  <body>
    <!-- WRAPPER -->
    <div id="wrapper">
      <!-- NAVBAR -->
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="brand">
          <a href="/home/"><img src="/dash/assets/img/logo-dark.png" alt="AnC Logo" class="img-responsive logo"></a>
        </div>
        <div class="container-fluid">
          <div class="navbar-btn">
            <button type="button" class="btn-toggle-fullwidth">
              <i class="lnr lnr-arrow-left-circle"></i>
            </button>
          </div>
          <div id="navbar-menu">
            <ul class="nav navbar-nav navbar-right">
              <li class="dropdown">
                <a
                  href="#"
                  class="dropdown-toggle icon-menu"
                  data-toggle="dropdown"
                >
                  <i class="lnr lnr-alarm"></i>
                  <span class="badge bg-danger">5</span>
                </a>
                <ul class="dropdown-menu notifications">
                  <li>
                    <a href="#" class="notification-item"
                      ><span class="dot bg-warning"></span>System space is
                      almost full</a
                    >
                  </li>
                  <li>
                    <a href="#" class="notification-item"
                      ><span class="dot bg-danger"></span>You have 9 unfinished
                      tasks</a
                    >
                  </li>
                  <li>
                    <a href="#" class="notification-item"
                      ><span class="dot bg-success"></span>Monthly report is
                      available</a
                    >
                  </li>
                  <li>
                    <a href="#" class="notification-item"
                      ><span class="dot bg-warning"></span>Weekly meeting in 1
                      hour</a
                    >
                  </li>
                  <li>
                    <a href="#" class="notification-item"
                      ><span class="dot bg-success"></span>Your request has been
                      approved</a>
                  </li>
                  <li><a href="#" class="more">See all notifications</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                  ><i class="lnr lnr-link"></i> <span>Quick Links</span>
                  <i class="icon-submenu lnr lnr-chevron-down"></i
                ></a>
                <ul class="dropdown-menu">
                  <li><a href="https://iitk.ac.in">IITK Home</a></li>
                  <li><a href="https://iitk.ac.in/dosa">DOSA</a></li>
                  <li><a href="https://iitk.ac.in/doaa">DOAA</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                  ><img
                    src="assets/img/user.png"
                    class="img-circle"
                    alt="Avatar"/>
                  <span>Samuel</span>
                  <i class="icon-submenu lnr lnr-chevron-down"></i
                ></a>
                <ul class="dropdown-menu">
                  <li>
                    <a href="#"
                      ><i class="lnr lnr-user"></i> <span>My Profile</span></a
                    >
                  </li>
                  <li>
                    <a href="#"
                      ><i class="lnr lnr-envelope"></i> <span>Message</span></a
                    >
                  </li>
                  <li>
                    <a href="#"
                      ><i class="lnr lnr-cog"></i> <span>Settings</span></a
                    >
                  </li>
                  <li>
                    <a href="#"
                      ><i class="lnr lnr-exit"></i> <span>Logout</span></a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- END NAVBAR -->
      <!-- LEFT SIDEBAR -->
      <div id="sidebar-nav" class="sidebar">
        <div class="sidebar-scroll">
          <nav>
            <ul class="nav">
              <li>
                <a href="../home/" class=""><i class="lnr lnr-home"></i> <span>Dashboard</span></a>
              </li>
              <li>
                <a href="projects.html" class=""><i class="lnr lnr-list"></i> <span>New Project</span></a>
              </li>
              <li>
                <a href="page-profile.html" class=""><i class="lnr lnr-user"></i><span>Profile</span></a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
      <!-- END LEFT SIDEBAR -->
      <!-- MAIN -->
      <div class="main">
        <!-- MAIN CONTENT -->
        <div class="main-content">
          <div class="container-fluid">
            <div class="panel">
              <div class="panel-heading">
                <h3 class="panel-title"><%=project.title%></h3>
              </div>
              <div class="panel-body">
                <table class="proj-data">
                  <tbody>
                    <tr>
                      <th>Prerequisites:</th>
                      <td><%=project.pre_requisites%></td>
                    </tr>
                    <tr>
                      <th>Eligibility:</th>
                      <td><%=project.eligibility%></td>
                    </tr>
                    <tr>
                      <th>Duration (in months):</th>
                      <td><%=project.duration%></td>
                    </tr>
                    <tr>
                      <th>Offered on:</th>
                      <td><%var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];%><%= project.createdAt.getDate()%> - <%= months[project.createdAt.getMonth()]%> - <%= project.createdAt.getFullYear()%></td>
                    </tr>
                    <tr>
                      <th>Number of Openings:</th>
                      <td><%=project.no_openings%></td>
                    </tr>
                    <tr>
                      <th>Status:</th>
                      <td>
                        <% if (project.available){%>
                          <span class="label label-success">Open</span>
                        <% }else{%>
                          <span class="label label-danger">Close  </span>
                        <% }%>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <br />
                <% if (project.available){%>
  								<button type="button" class="btn btn-danger"onclick="status1('<%= project._id %>',false);">Close</button>
                <% }else{%>
                  <button type="button" class="btn btn-success"onclick="status1('<%= project._id %>',true);">Open</button>
                <% }%>
              </div>
            </div>
            <ul class="nav nav-pills" id="tablist">
              <li role="presentation" class="active">
                <a href="#">Waiting <strong>(<%=requests.filter(request => request.status == null).length%>)</strong></a>
              </li>
              <li role="presentation">
                <a href="#">Accepted <strong>(<%=requests.filter(request => request.status == true).length%>)</strong></a>
              </li>
              <li role="presentation">
                <a href="#">Rejected <strong>(<%=requests.filter(request => request.status == false).length%>)</strong></a>
              </li>
            </ul>
            <br />
            <div id="tabcontent">
              <!-- Waiting Requests -->
              <div class="tab-page active">
                <div class="panel">
                  <div class="panel-body no-padding">
                    <table class="table table-striped">
                      <thead>
                        <tr>
                          <th>Name</th>
                          <th>Roll No</th>
                          <th>Department</th>
                          <th>Applied On</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                       
                          <% for (var i = 0;i<requests.length;i++) { %>
                                       <%if (requests[i].status == null){%> 
                                        <tr>
                                            <td><%= requests[i].student.name %></td>
                                            <td><%= requests[i].student.rollNumber %></td>
                                            <td><%= requests[i].student.department %></td>
                                            <td><%var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];%><%= requests[i].createdAt.getDate()%> - <%= months[requests[i].createdAt.getMonth()]%> - <%= requests[i].createdAt.getFullYear()%></td>
                                            <td>
                                              <button type="button" class="btn btn-success" onclick="status('<%= requests[i]._id %>',true);">Accept</button>
                                              <button type="button" class="btn btn-danger" onclick="status('<%= requests[i]._id %>',false);">Reject</button>
                                            </td>
                                            <td><a href="../request/view/<%= requests[i]._id %>">See more >></a></td>
                                        </tr>
                                    <% } %>
                                    <% } %>                
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- Accepted Requests -->
              <div class="tab-page">
                <div class="panel">
                  <div class="panel-body no-padding">
                    <table class="table table-striped">
                      <thead>
                        <tr>
                          <th>Name</th>
                          <th>Roll No</th>
                          <th>Department</th>
                          <th>Applied On</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                        <% for (var i = 0;i<requests.length;i++) { %>
                                       <%if (requests[i].status == true){%> 
                                        <tr>
                                            <td><%= requests[i].student.name %></td>
                                            <td><%= requests[i].student.rollNumber %></td>
                                            <td><%= requests[i].student.department %></td>
                                            <td><%var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];%><%= requests[i].createdAt.getDate()%> - <%= months[requests[i].createdAt.getMonth()]%> - <%= requests[i].createdAt.getFullYear()%></td>
                                            <td><a href="../request/view/<%= requests[i]._id %>">See more >></a></td>
                                        </tr>
                                    <% } %>
                        <% } %>  
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="col-md-6 text-right">
                  <a href="/project/download/<%=project._id%>" class="btn btn-primary">Download CSV</a>
                </div>
              </div>
              <!-- Rejected Requests -->
              <div class="tab-page">
                <div class="panel">
                  <div class="panel-body no-padding">
                    <table class="table table-striped">
                      <thead>
                        <tr>
                          <th>Name</th>
                          <th>Roll No</th>
                          <th>Department</th>
                          <th>Applied On</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                        <% for (var i = 0;i<requests.length;i++) { %>
                                       <%if (requests[i].status == false){%> 
                                        <tr>
                                            <td><%= requests[i].student.name %></td>
                                            <td><%= requests[i].student.rollNumber %></td>
                                            <td><%= requests[i].student.department %></td>
                                            <td><%var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];%><%= requests[i].createdAt.getDate()%> - <%= months[requests[i].createdAt.getMonth()]%> - <%= requests[i].createdAt.getFullYear()%></td>
                                            <td><a href="../request/view/<%= requests[i]._id %>">See more >></a></td>
                                        </tr>
                                    <% } %>
                                    <% } %>  
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- END MAIN CONTENT -->
      </div>
      <!-- END MAIN -->
      <div class="clearfix"></div>
      <footer>
        <div class="container-fluid">
          <p class="copyright">
            &copy; Academics and Career Council, IIT Kanpur
          </p>
        </div>
      </footer>
    </div>
    <!-- END WRAPPER -->
    <!-- Javascript -->
    <script>
      // Get the tabs and tab pages
      const tablinks = document.querySelectorAll("#tablist li");
      const tabpages = document.querySelectorAll("#tabcontent .tab-page");
      // Add event listeners to each tab button
      tablinks.forEach((link, index) =>
        link.addEventListener("click", () => changeTab(index))
      );
      // Define the change tab function
      function changeTab(tabIndex) {
        tablinks.forEach(link => link.classList.remove("active"));
        tabpages.forEach(page => page.classList.remove("active"));
        tablinks[tabIndex].classList.add("active");
        tabpages[tabIndex].classList.add("active");
      }
    </script>
    <script src="assets/vendor/jquery/jquery.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script src="assets/scripts/klorofil-common.js"></script>
  </body>
</html>
